â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    WAARI AI ASSISTANT - COMPLETE ARCHITECTURE DIAGRAM                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         ğŸ–¥ï¸ FRONTEND (React - Port 5173)                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“± USER INTERFACE LAYER                                                                           â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚  FloatingAIButton.jsx                                                                   â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Location: src/jsx/components/FloatingAIButton/                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Shows: Blue floating button with AI icon (bottom-right)                           â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Action: onClick â†’ Opens AIAssistant modal                                         â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ State: isAIAssistantOpen = true/false                                             â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚         â”‚                                                                                        â”‚    â”‚
â”‚  â”‚         â”‚ Opens                                                                                  â”‚    â”‚
â”‚  â”‚         â–¼                                                                                        â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚  AIAssistant.jsx (Main Chat Modal)                                                      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Location: src/jsx/layouts/AIAssistant.jsx                                          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Components:                                                                         â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Header: Shows "AI Assistant" + Close button                                    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Messages Area: Displays chat history                                           â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Input Box: User types message here                                             â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€ Send Button: Submit message                                                    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚                                                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ Flow: User sends message                                                          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€ handleSendMessage() called                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€ Add user message to chat                                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€ setIsLoading(true)                                                             â”‚     â”‚    â”‚
â”‚  â”‚  â”‚     â”‚                                                                                 â”‚     â”‚    â”‚
â”‚  â”‚  â”‚     â””â”€ Detect message type â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â”œâ”€ Is "trip" keyword found? â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â”‚                        â”‚            â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â”‚ YES                    â”‚ NO         â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â–¼                        â–¼            â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    searchTrips()    handleGeneralQuestion()  â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â”‚                        â”‚            â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â–¼                        â–¼            â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    (see flow below)            Predefined    â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                 responses    â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â”‚                        â”‚            â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                     â–¼                        â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚             generateTripResponse()            â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                  â†“                           â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚             Format response                  â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                  â†“                           â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚             botMessageText                   â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                  â†“                           â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚             Add to chat                      â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                  â†“                           â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚             setIsLoading(false)              â”‚ â”‚                                       â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ”§ SERVICE LAYER                                                                                  â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â”‚  TripService.js                                                                                   â”‚    â”‚
â”‚  â”‚  â””â”€ Location: src/services/TripService.js                                                        â”‚    â”‚
â”‚  â”‚  â”‚                                                                                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ Function 1: getGroupTours(filters)                                                          â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ API Call: GET /view-group-tour?perPage=20&page=1                                        â”‚    â”‚
â”‚  â”‚  â”‚                                                                                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ Function 2: getTailorMadeTours(filters)                                                     â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ API Call: GET /view-custom-tour?perPage=20&page=1                                       â”‚    â”‚
â”‚  â”‚  â”‚                                                                                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ Function 3: getTourTypes()                                                                  â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ API Call: GET /tour-type-list                                                            â”‚    â”‚
â”‚  â”‚  â”‚                                                                                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ Function 4: getCities()                                                                     â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ API Call: GET /city-list                                                                 â”‚    â”‚
â”‚  â”‚  â”‚                                                                                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ Function 5: searchTrips(query)                â—„â”€â”€â”€ MAIN FUNCTION                           â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Call getGroupTours() in parallel                                                         â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Call getTailorMadeTours() in parallel                                                    â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Wait for both responses                                                                  â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Filter group tours for matching keyword                                                  â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Filter tailor-made tours for matching keyword                                            â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ Return { groupTours, tailorMadeTours, total }                                            â”‚    â”‚
â”‚  â”‚  â”‚                                                                                                â”‚    â”‚
â”‚  â”‚  â””â”€ Function 6: generateTripResponse(searchResults)  â—„â”€â”€â”€ FORMAT RESULTS                       â”‚    â”‚
â”‚  â”‚     â”œâ”€ If total === 0: Return "No tours found"                                                  â”‚    â”‚
â”‚  â”‚     â”œâ”€ If groupTours.length > 0:                                                                â”‚    â”‚
â”‚  â”‚     â”‚  â””â”€ Format each tour as:                                                                  â”‚    â”‚
â”‚  â”‚     â”‚     "1. **Tour Name** (Code: ABC-001)"                                                    â”‚    â”‚
â”‚  â”‚     â”‚     "   â€¢ Type: Beach"                                                                    â”‚    â”‚
â”‚  â”‚     â”‚     "   â€¢ Duration: 7 days"                                                                â”‚    â”‚
â”‚  â”‚     â”‚     "   â€¢ Seats: 5/20 booked"                                                              â”‚    â”‚
â”‚  â”‚     â”‚     "   â€¢ Dates: 2024-02-10 - 2024-02-17"                                                  â”‚    â”‚
â”‚  â”‚     â”‚                                                                                             â”‚    â”‚
â”‚  â”‚     â”œâ”€ If tailorMadeTours.length > 0:                                                            â”‚    â”‚
â”‚  â”‚     â”‚  â””â”€ Format each tour as:                                                                  â”‚    â”‚
â”‚  â”‚     â”‚     "1. **Group Name** (ID: 0001)"                                                        â”‚    â”‚
â”‚  â”‚     â”‚     "   â€¢ Type: Custom"                                                                    â”‚    â”‚
â”‚  â”‚     â”‚     "   â€¢ Duration: 4D-3N"                                                                 â”‚    â”‚
â”‚  â”‚     â”‚     "   â€¢ Dates: 12-02-2024 - 16-02-2024"                                                  â”‚    â”‚
â”‚  â”‚     â”‚                                                                                             â”‚    â”‚
â”‚  â”‚     â””â”€ Return formatted message to display                                                      â”‚    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸŒ API SERVICE LAYER                                                                              â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â”‚  apiServices.js                                                                                   â”‚    â”‚
â”‚  â”‚  â””â”€ Location: src/services/apiServices.js                                                        â”‚    â”‚
â”‚  â”‚  â”‚                                                                                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ Axios Instance: import.meta.env.VITE_WAARI_BASEURL                                          â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ Base URL: http://localhost:3000/api                                                      â”‚    â”‚
â”‚  â”‚  â”‚                                                                                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ Interceptors:                                                                                â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Request: Adds token header + encrypted clientcode                                        â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ Response: Handles errors, redirects on 408 (timeout)                                     â”‚    â”‚
â”‚  â”‚  â”‚                                                                                                â”‚    â”‚
â”‚  â”‚  â””â”€ Export Functions:                                                                            â”‚    â”‚
â”‚  â”‚     â”œâ”€ get(url, params) - GET requests                                                          â”‚    â”‚
â”‚  â”‚     â”œâ”€ post(url, data) - POST requests                                                          â”‚    â”‚
â”‚  â”‚     â”œâ”€ put(url, data) - PUT requests                                                            â”‚    â”‚
â”‚  â”‚     â””â”€ del(url) - DELETE requests                                                               â”‚    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                              ğŸ“¡ NETWORK/HTTP REQUEST LAYER
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                              â”‚
â”‚  GET /view-group-tour?perPage=20&page=1            GET /view-custom-tour?perPage=20&page=1                â”‚
â”‚            â”‚                                                      â”‚                                          â”‚
â”‚            â”œâ”€ Header: token = JWT_TOKEN                         â”œâ”€ Header: token = JWT_TOKEN                â”‚
â”‚            â”œâ”€ Header: clientcode = ENCRYPTED                    â”œâ”€ Header: clientcode = ENCRYPTED           â”‚
â”‚            â””â”€ Returns: { data: [...], total, perPage, page }    â””â”€ Returns: { data: [...], total }          â”‚
â”‚                                                                                                              â”‚
â”‚  GET /tour-type-list                               GET /city-list                                          â”‚
â”‚            â”‚                                                â”‚                                               â”‚
â”‚            â””â”€ Returns: { data: [...] }                       â””â”€ Returns: { data: [...] }                    â”‚
â”‚                                                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                   ğŸ–§ BACKEND (Node.js - Port 3000)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                              â”‚
â”‚  server.js (Express Server)                                                                                 â”‚
â”‚  â””â”€ Registers all routes at line 128-144                                                                   â”‚
â”‚                                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  API ROUTES (src/routes/groupTourRoute.js)                                                         â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â”‚  Route 1: GET /view-group-tour                                                                    â”‚    â”‚
â”‚  â”‚  â”œâ”€ Token Validation: checkToken(token, [32])                                                    â”‚    â”‚
â”‚  â”‚  â”œâ”€ Extract Query Params: perPage, page, tourName, tourType, etc.                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ Database Query: SELECT * FROM grouptours LIMIT ? OFFSET ?                                    â”‚    â”‚
â”‚  â”‚  â””â”€ Response:                                                                                    â”‚    â”‚
â”‚  â”‚     {                                                                                             â”‚    â”‚
â”‚  â”‚       "data": [                                                                                   â”‚    â”‚
â”‚  â”‚         {                                                                                         â”‚    â”‚
â”‚  â”‚           "groupTourId": 1,                                                                       â”‚    â”‚
â”‚  â”‚           "tourName": "Bali Paradise",                                                            â”‚    â”‚
â”‚  â”‚           "tourCode": "BAL-001",                                                                  â”‚    â”‚
â”‚  â”‚           "tourTypeName": "Beach Tour",                                                           â”‚    â”‚
â”‚  â”‚           "startDate": "2024-02-10",                                                              â”‚    â”‚
â”‚  â”‚           "endDate": "2024-02-17",                                                                â”‚    â”‚
â”‚  â”‚           "duration": 7,                                                                          â”‚    â”‚
â”‚  â”‚           "seatsBook": 5,                                                                         â”‚    â”‚
â”‚  â”‚           "totalSeats": 20                                                                        â”‚    â”‚
â”‚  â”‚         }                                                                                         â”‚    â”‚
â”‚  â”‚       ],                                                                                          â”‚    â”‚
â”‚  â”‚       "total": 25,                                                                                â”‚    â”‚
â”‚  â”‚       "perPage": 10,                                                                              â”‚    â”‚
â”‚  â”‚       "page": 1                                                                                   â”‚    â”‚
â”‚  â”‚     }                                                                                             â”‚    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â”‚  Route 2: GET /view-custom-tour                                                                   â”‚    â”‚
â”‚  â”‚  â”œâ”€ Token Validation: checkToken(token, [110])                                                   â”‚    â”‚
â”‚  â”‚  â”œâ”€ Extract Query Params: startDate, endDate, groupName, duration, etc.                          â”‚    â”‚
â”‚  â”‚  â”œâ”€ Database Query: SELECT * FROM enquirycustomtours WHERE enquiryProcess = 2                   â”‚    â”‚
â”‚  â”‚  â””â”€ Response:                                                                                    â”‚    â”‚
â”‚  â”‚     {                                                                                             â”‚    â”‚
â”‚  â”‚       "data": [                                                                                   â”‚    â”‚
â”‚  â”‚         {                                                                                         â”‚    â”‚
â”‚  â”‚           "enquiryCustomId": 1,                                                                   â”‚    â”‚
â”‚  â”‚           "uniqueEnqueryId": "0001",                                                              â”‚    â”‚
â”‚  â”‚           "groupName": "Goa Adventure Group",                                                     â”‚    â”‚
â”‚  â”‚           "tourType": "Beach",                                                                    â”‚    â”‚
â”‚  â”‚           "startDate": "12-02-2024",                                                              â”‚    â”‚
â”‚  â”‚           "endDate": "16-02-2024",                                                                â”‚    â”‚
â”‚  â”‚           "duration": "4D-3N"                                                                     â”‚    â”‚
â”‚  â”‚         }                                                                                         â”‚    â”‚
â”‚  â”‚       ],                                                                                          â”‚    â”‚
â”‚  â”‚       "total": 10,                                                                                â”‚    â”‚
â”‚  â”‚       "currentPage": 1,                                                                           â”‚    â”‚
â”‚  â”‚       "perPage": 10,                                                                              â”‚    â”‚
â”‚  â”‚       "lastPage": 1                                                                               â”‚    â”‚
â”‚  â”‚     }                                                                                             â”‚    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â”‚  Route 3: GET /tour-type-list                                                                     â”‚    â”‚
â”‚  â”‚  â”œâ”€ Query: SELECT * FROM tourtype                                                                â”‚    â”‚
â”‚  â”‚  â””â”€ Response: { "data": [...tour types...] }                                                     â”‚    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â”‚  Route 4: GET /city-list                                                                          â”‚    â”‚
â”‚  â”‚  â”œâ”€ Query: SELECT * FROM city                                                                    â”‚    â”‚
â”‚  â”‚  â””â”€ Response: { "data": [...cities...] }                                                         â”‚    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  MIDDLEWARE (src/middleware/)                                                                      â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â”‚  CommonController.checkToken(token, permissionIds)                                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ Decode JWT token                                                                             â”‚    â”‚
â”‚  â”‚  â”œâ”€ Check if token expired                                                                       â”‚    â”‚
â”‚  â”‚  â”œâ”€ Check if user has required permissions                                                       â”‚    â”‚
â”‚  â”‚  â””â”€ Return: { userId, permissions, error? }                                                      â”‚    â”‚
â”‚  â”‚                                                                                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    ğŸ—„ï¸ DATABASE (MySQL - Supabase)                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                              â”‚
â”‚  Table: grouptours                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚ groupTourId | tourName | tourCode | tourTypeName | startDate | endDate | ..â”‚                            â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
â”‚  â”‚ 1           | Bali ... | BAL-001  | Beach       | 2024-02-10| 2024-..| ..â”‚                            â”‚
â”‚  â”‚ 2           | Goa ...  | GOA-001  | Beach       | 2024-03-..| 2024-..| ..â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                                                              â”‚
â”‚  Table: enquirycustomtours (Tailor-made tours)                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ enquiryId | groupName | destinationName | startDate | endDate | duration | ...â”‚                       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚  â”‚ 1         | Goa Trip  | Goa Beach       | 2024-12-..| 2024-16.| 4D-3N    | ...â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                                                              â”‚
â”‚  Table: tourtype                                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚ tourTypeId | tourTypeName | tourTypeImage          â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                                                                                                              â”‚
â”‚  Table: city                                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚  â”‚ cityId | cityName | cityImage             â”‚                                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚
â”‚                                                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                        ğŸ”„ COMPLETE FLOW EXAMPLE                                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                                            â•‘
â•‘  USER: "Show me tours to Bali"                                                                            â•‘
â•‘                                                                                                            â•‘
â•‘  1ï¸âƒ£  Frontend: AIAssistant.jsx                                                                            â•‘
â•‘      â””â”€ handleSendMessage()                                                                               â•‘
â•‘         â””â”€ Check keywords: "tours" found? YES âœ“                                                            â•‘
â•‘            â””â”€ Call searchTrips("Show me tours to Bali")                                                    â•‘
â•‘                                                                                                            â•‘
â•‘  2ï¸âƒ£  Frontend: TripService.searchTrips()                                                                  â•‘
â•‘      â”œâ”€ Call getGroupTours({ perPage: 20 })                                                               â•‘
â•‘      â”‚  â””â”€ API: GET /api/view-group-tour?perPage=20&page=1                                               â•‘
â•‘      â”‚     â””â”€ Header: token = JWT_TOKEN                                                                   â•‘
â•‘      â”‚                                                                                                    â•‘
â•‘      â””â”€ Call getTailorMadeTours({ perPage: 20 })                                                          â•‘
â•‘         â””â”€ API: GET /api/view-custom-tour?perPage=20&page=1                                              â•‘
â•‘            â””â”€ Header: token = JWT_TOKEN                                                                   â•‘
â•‘                                                                                                            â•‘
â•‘  3ï¸âƒ£  Backend: Node.js Express Server                                                                      â•‘
â•‘      â”œâ”€ Route: /view-group-tour                                                                           â•‘
â•‘      â”‚  â””â”€ checkToken(token, [32]) âœ“                                                                      â•‘
â•‘      â”‚     â””â”€ Query: SELECT * FROM grouptours                                                             â•‘
â•‘      â”‚        â””â”€ Return: [{ tourName: "Bali...", }, ...]                                                  â•‘
â•‘      â”‚                                                                                                    â•‘
â•‘      â””â”€ Route: /view-custom-tour                                                                          â•‘
â•‘         â””â”€ checkToken(token, [110]) âœ“                                                                      â•‘
â•‘            â””â”€ Query: SELECT * FROM enquirycustomtours WHERE enquiryProcess = 2                           â•‘
â•‘               â””â”€ Return: [{ groupName: "Bali...", }, ...]                                                 â•‘
â•‘                                                                                                            â•‘
â•‘  4ï¸âƒ£  Frontend: TripService.searchTrips() - Filtering                                                     â•‘
â•‘      â”œâ”€ Filter group tours for "bali" keyword                                                             â•‘
â•‘      â”‚  â””â”€ matchedGroupTours = [tours with "bali" in tourName]                                            â•‘
â•‘      â”‚                                                                                                    â•‘
â•‘      â””â”€ Filter tailor-made tours for "bali" keyword                                                       â•‘
â•‘         â””â”€ matchedTailorMade = [tours with "bali" in groupName]                                           â•‘
â•‘         â””â”€ Return { groupTours: [...], tailorMadeTours: [...], total: 2 }                                 â•‘
â•‘                                                                                                            â•‘
â•‘  5ï¸âƒ£  Frontend: TripService.generateTripResponse()                                                         â•‘
â•‘      â”œâ”€ Format group tours:                                                                               â•‘
â•‘      â”‚  "1. **Bali Paradise** (Code: BAL-001)"                                                            â•‘
â•‘      â”‚  "   â€¢ Type: Beach Tour"                                                                           â•‘
â•‘      â”‚  "   â€¢ Duration: 7 days"                                                                           â•‘
â•‘      â”‚  "   â€¢ Seats: 5/20 booked"                                                                         â•‘
â•‘      â”‚  "   â€¢ Dates: 2024-02-10 - 2024-02-17"                                                             â•‘
â•‘      â”‚                                                                                                    â•‘
â•‘      â””â”€ Format tailor-made tours:                                                                         â•‘
â•‘         "1. **Bali Trip Group** (ID: 0001)"                                                               â•‘
â•‘         "   â€¢ Type: Beach"                                                                                â•‘
â•‘         "   â€¢ Duration: 4D-3N"                                                                            â•‘
â•‘         "   â€¢ Dates: 12-02-2024 - 16-02-2024"                                                             â•‘
â•‘                                                                                                            â•‘
â•‘  6ï¸âƒ£  Frontend: AIAssistant.jsx - Display Response                                                        â•‘
â•‘      â”œâ”€ botMessageText = formatted response                                                                â•‘
â•‘      â”œâ”€ Add to messages array                                                                              â•‘
â•‘      â””â”€ User sees: "I found 2 trip(s) for you! ğŸ‰"                                                         â•‘
â•‘         With all the formatted tours displayed                                                             â•‘
â•‘                                                                                                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                        âœ¨ KEY CONFIGURATIONS âœ¨
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend Configuration:
â”œâ”€ File: d:\Waari\waari-reactjs\.env
â””â”€ VITE_WAARI_BASEURL=http://localhost:3000/api

Backend Configuration:
â”œâ”€ File: D:\Waari\waari-nodejs\.env
â”œâ”€ DB_HOST=... (Supabase connection)
â”œâ”€ DB_USER=...
â”œâ”€ DB_PASSWORD=...
â””â”€ DB_DATABASE=...

Ports:
â”œâ”€ Frontend: http://localhost:5173
â””â”€ Backend:  http://localhost:3000

API Authentication:
â”œâ”€ Method: Token-based (JWT)
â”œâ”€ Location: request header "token"
â””â”€ Required for all /api endpoints

Trip Keywords Detected:
â”œâ”€ trip, tour, destination, package, travel
â”œâ”€ holiday, vacation, itinerary, departure, booking
â””â”€ Case-insensitive matching

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•